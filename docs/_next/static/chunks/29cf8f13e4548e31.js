(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41889,e=>{"use strict";var t=e.i(17927);async function i(){let{data:e,error:i}=await t.supabase.from("categorie").select("*").order("nom");if(i)throw i;return e??[]}async function a(){return(await i()).map(e=>({label:e.nom,value:e.id.toString()}))}e.s(["getCategories",()=>i,"getCategoriesForSelect",()=>a])},62388,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a="chevron-down",r=[],s="f078",n="M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z";i.definition={prefix:"fas",iconName:a,icon:[448,512,r,s,n]},i.faChevronDown=i.definition,i.prefix="fas",i.iconName=a,i.width=448,i.height=512,i.ligatures=r,i.unicode=s,i.svgPathData=n,i.aliases=r},71120,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(49721),r=e.i(62388);let s=(0,i.forwardRef)(({label:e,error:s,fullWidth:n=!1,options:o,placeholder:l,style:u,value:c,defaultValue:d,...f},p)=>{let[h,g]=(0,i.useState)(!1),w=void 0!==c&&""!==c;return(0,t.jsxs)("div",{className:["ui-input-container",n?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsxs)("div",{className:"ui-select-wrapper",style:{position:"relative"},children:[(0,t.jsxs)("select",{ref:p,value:c,defaultValue:d,className:["ui-input",s?"ui-input--error":"",h?"ui-input--focus":"",w?"ui-input--filled":""].join(" "),style:{...u,appearance:"none",WebkitAppearance:"none",MozAppearance:"none",paddingRight:36},onFocus:e=>{g(!0),f.onFocus?.(e)},onBlur:e=>{g(!1),f.onBlur?.(e)},...f,children:[l&&(0,t.jsx)("option",{value:"",disabled:!0,hidden:!0,children:l}),o.map(e=>(0,t.jsx)("option",{value:e.value,className:"ui-select-option",children:e.label},e.value))]}),(0,t.jsx)("span",{className:"ui-select-chevron",children:(0,t.jsx)(a.FontAwesomeIcon,{icon:r.faChevronDown})})]}),s&&(0,t.jsx)("span",{className:"ui-input-error",children:s})]})});s.displayName="Select",e.s(["default",0,s])},79390,e=>{"use strict";var t=e.i(17927);async function i(e,i,a){let{data:r,error:s}=await t.supabase.from("workout").select("*, categorie: id_category(id,nom,svg)").eq("id_user",e).order("date",{ascending:!1}).range(i,a);if(s)throw s;return r}async function a(e){let{data:i,error:a}=await t.supabase.from("workout").select(`
      *,
      categorie: id_category (
        id,
        nom
      ),
      workout_line (
        *,
        exercise: id_exo (
          id,
          nom
        ),
        serie (*,
          reps(*)
        )
      )
    `).eq("id",e).single();if(a)throw a;return i}async function r(e,i,a){let{data:r,error:s}=await t.supabase.from("workout").insert([{id_user:e,date:i,id_category:a}]).select().single();if(s)throw s;return r}async function s(e){let{data:i,error:a}=await t.supabase.from("workout_line").insert([{id_workout:e,id_exo:null}]).select().single();if(a)throw a;return i}async function n(e,i){let{data:a,error:r}=await t.supabase.from("workout_line").update({id_exo:i}).eq("id",e).select().single();if(r)throw r;return a}async function o(e,i){let{data:a,error:r}=await t.supabase.from("serie").insert([{id_workout_line:e,ordre:i}]).select().single();if(r)throw r;let{data:s,error:n}=await t.supabase.from("reps").insert([{id_serie:a.id,charge:0,qte:0}]).select().single();if(n)throw n;return a}async function l(e,i,a){let{data:r,error:s}=await t.supabase.from("reps").insert([{id_serie:e,charge:i,qte:a}]).select().single();if(s)throw s;return r}async function u(e,i,a){let{data:r,error:s}=await t.supabase.from("reps").update({charge:i,qte:a}).eq("id",e).select().single();if(s)throw s;return r}async function c(e){let{data:i,error:a}=await t.supabase.from("reps").delete().eq("id",e).select().single();if(a)throw a;return i}async function d(e){let{data:i,error:a}=await t.supabase.from("workout").delete().eq("id",e).select().single();if(a)throw a;return i}async function f(e){let{data:i,error:a}=await t.supabase.from("workout_line").delete().eq("id",e).select().single();if(a)throw a;return i}async function p(e){let{data:i,error:a}=await t.supabase.from("serie").delete().eq("id",e).select().single();if(a)throw a;return i}e.s(["addExerciseToWorkout",()=>s,"addRep",()=>l,"addSet",()=>o,"createWorkout",()=>r,"deleteExercise",()=>f,"deleteRep",()=>c,"deleteSerie",()=>p,"deleteWorkout",()=>d,"editRep",()=>u,"getWorkoutById",()=>a,"getWorkoutsPaginated",()=>i,"updateWorkoutLine",()=>n])},69170,e=>{"use strict";var t=e.i(43476),i=e.i(76525),a=e.i(71645);let r=(0,a.forwardRef)(({label:e,error:i,fullWidth:r=!1,style:s,value:n,...o},l)=>{let[u,c]=(0,a.useState)(!1),d=void 0!==n&&""!==n;return(0,t.jsxs)("div",{className:["ui-input-container",r?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsx)("input",{ref:l,type:"date",value:n,className:["ui-input",i?"ui-input--error":"",u?"ui-input--focus":"",d?"ui-input--filled":""].join(" "),style:s,onFocus:e=>{c(!0),o.onFocus?.(e)},onBlur:e=>{c(!1),o.onBlur?.(e)},...o}),i&&(0,t.jsx)("span",{className:"ui-input-error",children:i})]})});r.displayName="DatePicker";var s=e.i(71120),n=e.i(41889),o=e.i(79390),l=e.i(42365),u=e.i(18566),c=e.i(60446),d=e.i(46696),f=e.i(57688);function p(){let e=(0,u.useRouter)(),[p,h]=(0,a.useState)([]),[g,w]=(0,a.useState)(""),[m,v]=(0,a.useState)(new Date().toISOString().split("T")[0]),[x,y]=(0,a.useState)(!1),[b,j]=(0,a.useState)(null),{setTitle:k}=(0,c.usePageTitle)();(0,a.useEffect)(()=>{(0,l.getUser)().then(e=>{j(e?.data?.user?.id??null)}),(0,n.getCategoriesForSelect)().then(e=>{h(e),e.length>0&&w(e[0].value.toString())}),k("Nouvelle séance")},[k]);let N=async()=>{if(b&&g&&m)try{y(!0);let t=await (0,o.createWorkout)(b,m,g);d.toast.success("Séance créée"),setTimeout(()=>{e.push(`/workout/?workout=${t.id}`)},1700)}catch(e){console.error("Erreur création séance:",e),d.toast.error("Erreur lors de la création de la séance"),y(!1)}};return(0,t.jsxs)(t.Fragment,{children:[x&&(0,t.jsx)("div",{className:"loading-overlay",children:(0,t.jsx)("div",{className:"loader-container",children:(0,t.jsx)(f.default,{src:"/PPL/carrot.gif",alt:"Loading...",width:200,height:300,className:"loader-gif",unoptimized:!0})})}),(0,t.jsxs)("div",{className:"content",children:[(0,t.jsx)(s.default,{options:p,value:g,onChange:e=>w(e.target.value),fullWidth:!0}),(0,t.jsx)(r,{value:m,onChange:e=>v(e.target.value)}),(0,t.jsx)(i.default,{variant:"filled",fullWidth:!0,onClick:N,disabled:x||!b,children:x?"Création...":"Créer la séance"})]})]})}e.s(["default",()=>p],69170)}]);