(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41889,e=>{"use strict";var t=e.i(17927);async function i(){let{data:e,error:i}=await t.supabase.from("categorie").select("*").order("nom");if(i)throw i;return e??[]}async function r(){return(await i()).map(e=>({label:e.nom,value:e.id.toString()}))}e.s(["getCategories",()=>i,"getCategoriesForSelect",()=>r])},79390,e=>{"use strict";var t=e.i(17927);async function i(e,i,r){let{data:s,error:n}=await t.supabase.from("workout").select("*, categorie: id_category(id,nom,svg)").eq("id_user",e).order("date",{ascending:!1}).range(i,r);if(n)throw n;return s}async function r(e){let{data:i,error:r}=await t.supabase.from("workout").select(`
      *,
      categorie: id_category (
        id,
        nom
      ),
      workout_line (
        *,
        exercise: id_exo (
          id,
          nom
        ),
        serie (*,
          reps(*)
        )
      )
    `).eq("id",e).single();if(r)throw r;return i}async function s(e,i,r){let{data:s,error:n}=await t.supabase.from("workout").insert([{id_user:e,date:i,id_category:r}]).select().single();if(n)throw n;return s}async function n(e){let{data:i,error:r}=await t.supabase.from("workout_line").insert([{id_workout:e,id_exo:null}]).select().single();if(r)throw r;return i}async function a(e,i){let{data:r,error:s}=await t.supabase.from("workout_line").update({id_exo:i}).eq("id",e).select().single();if(s)throw s;return r}async function o(e,i){let{data:r,error:s}=await t.supabase.from("serie").insert([{id_workout_line:e,ordre:i}]).select().single();if(s)throw s;let{data:n,error:a}=await t.supabase.from("reps").insert([{id_serie:r.id,charge:0,qte:0}]).select().single();if(a)throw a;return r}async function l(e,i,r){let{data:s,error:n}=await t.supabase.from("reps").insert([{id_serie:e,charge:i,qte:r}]).select().single();if(n)throw n;return s}async function u(e,i,r){let{data:s,error:n}=await t.supabase.from("reps").update({charge:i,qte:r}).eq("id",e).select().single();if(n)throw n;return s}async function c(e){let{data:i,error:r}=await t.supabase.from("reps").delete().eq("id",e).select().single();if(r)throw r;return i}async function d(e){let{data:i,error:r}=await t.supabase.from("workout").delete().eq("id",e).select().single();if(r)throw r;return i}async function f(e){let{data:i,error:r}=await t.supabase.from("workout_line").delete().eq("id",e).select().single();if(r)throw r;return i}async function p(e){let{data:i,error:r}=await t.supabase.from("serie").delete().eq("id",e).select().single();if(r)throw r;return i}e.s(["addExerciseToWorkout",()=>n,"addRep",()=>l,"addSet",()=>o,"createWorkout",()=>s,"deleteExercise",()=>f,"deleteRep",()=>c,"deleteSerie",()=>p,"deleteWorkout",()=>d,"editRep",()=>u,"getWorkoutById",()=>r,"getWorkoutsPaginated",()=>i,"updateWorkoutLine",()=>a])},71120,e=>{"use strict";var t=e.i(43476),i=e.i(71645),r=e.i(49721),s=e.i(68757);function n({label:e,error:n,fullWidth:a=!1,options:o,placeholder:l,value:u,onChange:c,disabled:d=!1}){let[f,p]=(0,i.useState)(!1),[m,g]=(0,i.useState)(!1),h=(0,i.useRef)(null),w=o.find(e=>e.value===u);return(0,i.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&(p(!1),g(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,t.jsxs)("div",{className:["ui-input-container",a?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsxs)("div",{ref:h,style:{position:"relative"},children:[(0,t.jsxs)("div",{className:["ui-input ui-custom-select",n?"ui-input--error":"",m?"ui-input--focus":"",u?"ui-input--filled":"",d?"ui-custom-select--disabled":""].join(" "),onClick:e=>{e.stopPropagation(),d||p(!f)},onFocus:()=>g(!0),tabIndex:d?-1:0,style:{cursor:d?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[w?.icon&&(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:w.icon},style:{width:"20px",height:"20px",display:"flex",alignItems:"center",flexShrink:0},className:"custom-select-icon"}),(0,t.jsx)("span",{style:{flex:1},children:w?w.label:l||"Sélectionner..."}),(0,t.jsx)(r.FontAwesomeIcon,{icon:s.faChevronDown,style:{transition:"transform 0.2s",transform:f?"rotate(180deg)":"rotate(0deg)",flexShrink:0}})]}),f&&(0,t.jsx)("div",{className:"ui-custom-select-dropdown",onClick:e=>e.stopPropagation(),children:o.map(e=>(0,t.jsxs)("div",{className:["ui-custom-select-option",e.value===u?"ui-custom-select-option--selected":""].join(" "),onClick:t=>{var i;t.stopPropagation(),i=e.value,c?.(i),p(!1),g(!1)},style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.icon&&(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:e.icon},style:{width:"20px",height:"20px",display:"flex",alignItems:"center",flexShrink:0},className:"custom-select-icon"}),(0,t.jsx)("span",{children:e.label})]},e.value))})]}),n&&(0,t.jsx)("span",{className:"ui-input-error",children:n})]})}e.s(["default",()=>n])},69170,e=>{"use strict";var t=e.i(43476),i=e.i(76525),r=e.i(71645),s=e.i(49721),n=e.i(68757);let a=(0,r.forwardRef)(({label:e,error:i,fullWidth:a=!1,style:o,value:l,...u},c)=>{let[d,f]=(0,r.useState)(!1),p=void 0!==l&&""!==l,m=(0,r.useRef)(null);return(0,t.jsxs)("div",{className:["ui-input-container",a?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsxs)("div",{style:{position:"relative"},children:[(0,t.jsx)("input",{ref:e=>{m.current=e,"function"==typeof c?c(e):c&&(c.current=e)},type:"date",value:l,className:["ui-input",i?"ui-input--error":"",d?"ui-input--focus":"",p?"ui-input--filled":""].join(" "),style:{...o,paddingRight:"40px"},onFocus:e=>{f(!0),u.onFocus?.(e)},onBlur:e=>{f(!1),u.onBlur?.(e)},...u}),(0,t.jsx)(s.FontAwesomeIcon,{icon:n.faCalendar,onClick:()=>{m.current&&m.current.showPicker?.()},style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",cursor:"pointer",color:"var(--theme-text-secondary)"}})]}),i&&(0,t.jsx)("span",{className:"ui-input-error",children:i})]})});a.displayName="DatePicker";var o=e.i(71120),l=e.i(41889),u=e.i(79390),c=e.i(42365),d=e.i(18566),f=e.i(60446),p=e.i(46696),m=e.i(57688);function g(){let e=(0,d.useRouter)(),[s,n]=(0,r.useState)([]),[g,h]=(0,r.useState)(""),[w,x]=(0,r.useState)(new Date().toISOString().split("T")[0]),[v,y]=(0,r.useState)(!1),[j,k]=(0,r.useState)(null),{setTitle:b}=(0,f.usePageTitle)();(0,r.useEffect)(()=>{(0,c.getUser)().then(e=>{k(e?.data?.user?.id??null)}),(0,l.getCategoriesForSelect)().then(e=>{n(e),e.length>0&&h(e[0].value.toString())}),b("Nouvelle séance")},[b]);let S=async()=>{if(j&&g&&w)try{y(!0);let t=await (0,u.createWorkout)(j,w,g);p.toast.success("Séance créée"),setTimeout(()=>{e.push(`/workout/?workout=${t.id}`)},1700)}catch(e){console.error("Erreur création séance:",e),p.toast.error("Erreur lors de la création de la séance"),y(!1)}};return(0,t.jsxs)(t.Fragment,{children:[v&&(0,t.jsx)("div",{className:"loading-overlay",children:(0,t.jsx)("div",{className:"loader-container",children:(0,t.jsx)(m.default,{src:"/PPL/carrot.gif",alt:"Loading...",width:200,height:300,className:"loader-gif",unoptimized:!0})})}),(0,t.jsxs)("div",{className:"content",children:[(0,t.jsx)(o.default,{options:s,value:g,onChange:e=>{h(e)},fullWidth:!0}),(0,t.jsx)(a,{value:w,onChange:e=>x(e.target.value)}),(0,t.jsx)(i.default,{variant:"filled",fullWidth:!0,onClick:S,disabled:v||!j,children:v?"Création...":"Créer la séance"})]})]})}e.s(["default",()=>g],69170)}]);