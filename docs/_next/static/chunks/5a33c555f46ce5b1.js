(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82564,e=>{"use strict";var t=e.i(43476);function s(){return(0,t.jsx)("div",{className:"loader-container",children:(0,t.jsxs)("div",{className:"loader-dots",children:[(0,t.jsx)("div",{className:"dot dot-1"}),(0,t.jsx)("div",{className:"dot dot-2"}),(0,t.jsx)("div",{className:"dot dot-3"})]})})}e.s(["default",()=>s])},79390,e=>{"use strict";var t=e.i(17927);async function s(e,s,r){let{data:i,error:a}=await t.supabase.from("workout").select("*, categorie: id_category(id,nom,svg)").eq("id_user",e).order("date",{ascending:!1}).range(s,r);if(a)throw a;return i}async function r(e){let{data:s,error:r}=await t.supabase.from("workout").select(`
      *,
      categorie: id_category (
        id,
        nom
      ),
      workout_line (
        *,
        exercise: id_exo (
          id,
          nom
        ),
        serie (*,
          reps(*)
        )
      )
    `).eq("id",e).single();if(r)throw r;return s}async function i(e,s,r){let{data:i,error:a}=await t.supabase.from("workout").insert([{id_user:e,date:s,id_category:r}]).select().single();if(a)throw a;return i}async function a(e){let{data:s,error:r}=await t.supabase.from("workout_line").insert([{id_workout:e,id_exo:null}]).select().single();if(r)throw r;return s}async function n(e,s){let{data:r,error:i}=await t.supabase.from("workout_line").update({id_exo:s}).eq("id",e).select().single();if(i)throw i;return r}async function o(e,s){let{data:r,error:i}=await t.supabase.from("serie").insert([{id_workout_line:e,ordre:s}]).select().single();if(i)throw i;let{data:a,error:n}=await t.supabase.from("reps").insert([{id_serie:r.id,charge:0,qte:0}]).select().single();if(n)throw n;return r}async function l(e,s,r){let{data:i,error:a}=await t.supabase.from("reps").insert([{id_serie:e,charge:s,qte:r}]).select().single();if(a)throw a;return i}async function u(e,s,r){let{data:i,error:a}=await t.supabase.from("reps").update({charge:s,qte:r}).eq("id",e).select().single();if(a)throw a;return i}async function c(e){let{data:s,error:r}=await t.supabase.from("reps").delete().eq("id",e).select().single();if(r)throw r;return s}async function d(e){let{data:s,error:r}=await t.supabase.from("workout").delete().eq("id",e).select().single();if(r)throw r;return s}async function f(e){let{data:s,error:r}=await t.supabase.from("workout_line").delete().eq("id",e).select().single();if(r)throw r;return s}async function w(e){let{data:s,error:r}=await t.supabase.from("serie").delete().eq("id",e).select().single();if(r)throw r;return s}e.s(["addExerciseToWorkout",()=>a,"addRep",()=>l,"addSet",()=>o,"createWorkout",()=>i,"deleteExercise",()=>f,"deleteRep",()=>c,"deleteSerie",()=>w,"deleteWorkout",()=>d,"editRep",()=>u,"getWorkoutById",()=>r,"getWorkoutsPaginated",()=>s,"updateWorkoutLine",()=>n])},31713,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(79390),i=e.i(60446),a=e.i(42365),n=e.i(76525),o=e.i(82564),l=e.i(49721),u=e.i(68757),c=e.i(22016),d=e.i(62106);let f=({workout:e})=>(0,t.jsxs)(c.default,{className:"workout tile",href:`/workout/?workout=${e.id}`,onClick:()=>{(0,d.playUserSound)()},children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold mb-2",children:["Séance du ",new Date(e.date).toLocaleDateString()]}),(0,t.jsx)("span",{className:"tag",children:e.categorie?.nom})]});var w=e.i(18566);function g(){let[e,c]=(0,s.useState)([]),[d,g]=(0,s.useState)(0),[m,h]=(0,s.useState)(!1),[p,k]=(0,s.useState)(!0),[b,x]=(0,s.useState)(null),y=(0,w.useRouter)();(0,s.useEffect)(()=>{(0,a.getUser)().then(e=>{x(e?.data?.user?.id??null)})},[]);let{setTitle:j}=(0,i.usePageTitle)();(0,s.useEffect)(()=>{j("Dernières séances")},[j]);let _=(0,s.useRef)(null);return(0,s.useEffect)(()=>{b&&p&&(async()=>{h(!0);let e=10*d,t=await (0,r.getWorkoutsPaginated)(b,e,e+10-1);c(e=>0===d?t:[...e,...t]),k(10===t.length),h(!1)})()},[b,d,p]),(0,s.useEffect)(()=>{if(!p)return;let t=_.current;if(!t)return;let s=new IntersectionObserver(t=>{t[0].isIntersecting&&!m&&e.length>0&&g(e=>e+1)},{rootMargin:"200px",threshold:0});return s.observe(t),()=>s.disconnect()},[_,m,p,e.length]),(0,t.jsxs)(t.Fragment,{children:[e.map(e=>(0,t.jsx)(f,{workout:e},e.id)),p&&(0,t.jsx)("div",{ref:_,className:"p-4 text-center",children:(0,t.jsx)(o.default,{})}),(0,t.jsx)(n.default,{variant:"icon-filled",size:"lg",className:"fab-button","aria-label":"Ajouter une séance",icon:(0,t.jsx)(l.FontAwesomeIcon,{icon:u.faPlus}),onClick:()=>{y.push("workout/new")}})]})}e.s(["default",()=>g],31713)}]);