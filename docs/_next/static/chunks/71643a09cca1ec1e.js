(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41889,e=>{"use strict";var t=e.i(17927);async function i(){let{data:e,error:i}=await t.supabase.from("categorie").select("*").order("nom");if(i)throw i;return e??[]}async function a(){return(await i()).map(e=>({label:e.nom,value:e.id.toString()}))}e.s(["getCategories",()=>i,"getCategoriesForSelect",()=>a])},79390,e=>{"use strict";var t=e.i(17927);async function i(e,i,a){console.log("Fetching workouts for user",e,"from",i,"to",a);let{data:n,error:r}=await t.supabase.from("workout").select("*, categorie: id_category(id,nom,svg)").eq("id_user",e).order("date",{ascending:!1}).range(i,a);if(r)throw r;return n}async function a(e){let{data:i,error:a}=await t.supabase.from("workout").select(`
      *,
      categorie: id_category (
        id,
        nom
      ),
      workout_line (
        *,
        serie (*,
          rep (*)
        )
      )
    `).eq("id",e).single();if(a)throw a;return i}async function n(e,i,a){let{data:n,error:r}=await t.supabase.from("workout").insert([{id_user:e,date:i,id_category:a}]).select().single();if(r)throw r;return n}e.s(["createWorkout",()=>n,"getWorkoutById",()=>a,"getWorkoutsPaginated",()=>i])},62388,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a="chevron-down",n=[],r="f078",s="M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z";i.definition={prefix:"fas",iconName:a,icon:[448,512,n,r,s]},i.faChevronDown=i.definition,i.prefix="fas",i.iconName=a,i.width=448,i.height=512,i.ligatures=n,i.unicode=r,i.svgPathData=s,i.aliases=n},71120,e=>{"use strict";var t=e.i(43476),i=e.i(71645),a=e.i(49721),n=e.i(62388);let r=(0,i.forwardRef)(({label:e,error:r,fullWidth:s=!1,options:o,placeholder:l,style:u,value:c,defaultValue:d,...p},f)=>{let[h,g]=(0,i.useState)(!1),v=void 0!==c&&""!==c;return(0,t.jsxs)("div",{className:["ui-input-container",s?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsxs)("div",{className:"ui-select-wrapper",style:{position:"relative"},children:[(0,t.jsxs)("select",{ref:f,value:c,defaultValue:d,className:["ui-input",r?"ui-input--error":"",h?"ui-input--focus":"",v?"ui-input--filled":""].join(" "),style:{...u,appearance:"none",WebkitAppearance:"none",MozAppearance:"none",paddingRight:36},onFocus:e=>{g(!0),p.onFocus?.(e)},onBlur:e=>{g(!1),p.onBlur?.(e)},...p,children:[l&&(0,t.jsx)("option",{value:"",disabled:!0,hidden:!0,children:l}),o.map(e=>(0,t.jsx)("option",{value:e.value,className:"ui-select-option",children:e.label},e.value))]}),(0,t.jsx)("span",{className:"ui-select-chevron",children:(0,t.jsx)(a.FontAwesomeIcon,{icon:n.faChevronDown})})]}),r&&(0,t.jsx)("span",{className:"ui-input-error",children:r})]})});r.displayName="Select",e.s(["default",0,r])},69170,e=>{"use strict";var t=e.i(43476),i=e.i(76525),a=e.i(71645);let n=(0,a.forwardRef)(({label:e,error:i,fullWidth:n=!1,style:r,value:s,...o},l)=>{let[u,c]=(0,a.useState)(!1),d=void 0!==s&&""!==s;return(0,t.jsxs)("div",{className:["ui-input-container",n?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsx)("input",{ref:l,type:"date",value:s,className:["ui-input",i?"ui-input--error":"",u?"ui-input--focus":"",d?"ui-input--filled":""].join(" "),style:r,onFocus:e=>{c(!0),o.onFocus?.(e)},onBlur:e=>{c(!1),o.onBlur?.(e)},...o}),i&&(0,t.jsx)("span",{className:"ui-input-error",children:i})]})});n.displayName="DatePicker";var r=e.i(71120),s=e.i(41889),o=e.i(79390),l=e.i(42365),u=e.i(18566),c=e.i(60446);function d(){let e=(0,u.useRouter)(),[d,p]=(0,a.useState)([]),[f,h]=(0,a.useState)(""),[g,v]=(0,a.useState)(new Date().toISOString().split("T")[0]),[m,w]=(0,a.useState)(!1),[j,x]=(0,a.useState)(null),{setTitle:y}=(0,c.usePageTitle)();(0,a.useEffect)(()=>{(0,l.getUser)().then(e=>{x(e?.data?.user?.id??null)}),(0,s.getCategoriesForSelect)().then(e=>{p(e),e.length>0&&h(e[0].value.toString())}),y("Nouvelle séance")},[]);let b=async()=>{if(j&&f&&g)try{w(!0);let t=await (0,o.createWorkout)(j,g,f);e.push(`/workout/?workout=${t.id}`)}catch(e){console.error("Erreur création séance:",e),w(!1)}};return(0,t.jsxs)("div",{className:"content",children:[(0,t.jsx)(r.default,{options:d,value:f,onChange:e=>h(e.target.value),fullWidth:!0}),(0,t.jsx)(n,{value:g,onChange:e=>v(e.target.value)}),(0,t.jsx)(i.default,{variant:"filled",fullWidth:!0,onClick:b,disabled:m||!j,children:m?"Création...":"Créer la séance"})]})}e.s(["default",()=>d],69170)}]);