(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41889,e=>{"use strict";var t=e.i(17927);async function i(){let{data:e,error:i}=await t.supabase.from("categorie").select("*").order("nom");if(i)throw i;return e??[]}async function r(){return(await i()).map(e=>({label:e.nom,value:e.id.toString()}))}e.s(["getCategories",()=>i,"getCategoriesForSelect",()=>r])},62388,(e,t,i)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="chevron-down",a=[],s="f078",n="M201.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 338.7 54.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z";i.definition={prefix:"fas",iconName:r,icon:[448,512,a,s,n]},i.faChevronDown=i.definition,i.prefix="fas",i.iconName=r,i.width=448,i.height=512,i.ligatures=a,i.unicode=s,i.svgPathData=n,i.aliases=a},71120,e=>{"use strict";var t=e.i(43476),i=e.i(71645),r=e.i(49721),a=e.i(62388);let s=(0,i.forwardRef)(({label:e,error:s,fullWidth:n=!1,options:o,placeholder:l,style:u,value:c,defaultValue:d,...f},p)=>{let[w,h]=(0,i.useState)(!1),g=void 0!==c&&""!==c;return(0,t.jsxs)("div",{className:["ui-input-container",n?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsxs)("div",{className:"ui-select-wrapper",style:{position:"relative"},children:[(0,t.jsxs)("select",{ref:p,value:c,defaultValue:d,className:["ui-input",s?"ui-input--error":"",w?"ui-input--focus":"",g?"ui-input--filled":""].join(" "),style:{...u,appearance:"none",WebkitAppearance:"none",MozAppearance:"none",paddingRight:36},onFocus:e=>{h(!0),f.onFocus?.(e)},onBlur:e=>{h(!1),f.onBlur?.(e)},...f,children:[l&&(0,t.jsx)("option",{value:"",disabled:!0,hidden:!0,children:l}),o.map(e=>(0,t.jsx)("option",{value:e.value,className:"ui-select-option",children:e.label},e.value))]}),(0,t.jsx)("span",{className:"ui-select-chevron",children:(0,t.jsx)(r.FontAwesomeIcon,{icon:a.faChevronDown})})]}),s&&(0,t.jsx)("span",{className:"ui-input-error",children:s})]})});s.displayName="Select",e.s(["default",0,s])},79390,e=>{"use strict";var t=e.i(17927);async function i(e,i,r){console.log("Fetching workouts for user",e,"from",i,"to",r);let{data:a,error:s}=await t.supabase.from("workout").select("*, categorie: id_category(id,nom,svg)").eq("id_user",e).order("date",{ascending:!1}).range(i,r);if(s)throw s;return a}async function r(e){console.log("Fetching workout with id",e);let{data:i,error:r}=await t.supabase.from("workout").select(`
      *,
      categorie: id_category (
        id,
        nom
      ),
      workout_line (
        *,
        exercise: id_exo (
          id,
          nom
        ),
        serie (*,
          reps(*)
        )
      )
    `).eq("id",e).single();if(r)throw r;return i}async function a(e,i,r){let{data:a,error:s}=await t.supabase.from("workout").insert([{id_user:e,date:i,id_category:r}]).select().single();if(s)throw s;return a}async function s(e){let{data:i,error:r}=await t.supabase.from("workout_line").insert([{id_workout:e,id_exo:null}]).select().single();if(r)throw r;return i}async function n(e,i){let{data:r,error:a}=await t.supabase.from("workout_line").update({id_exo:i}).eq("id",e).select().single();if(a)throw a;return r}async function o(e,i){let{data:r,error:a}=await t.supabase.from("serie").insert([{id_workout_line:e,ordre:i}]).select().single();if(a)throw a;let{data:s,error:n}=await t.supabase.from("reps").insert([{id_serie:r.id,charge:0,qte:0}]).select().single();if(n)throw n;return r}async function l(e,i,r){let{data:a,error:s}=await t.supabase.from("reps").insert([{id_serie:e,charge:i,qte:r}]).select().single();if(s)throw s;return a}async function u(e,i,r){let{data:a,error:s}=await t.supabase.from("reps").update({charge:i,qte:r}).eq("id",e).select().single();if(s)throw s;return a}async function c(e){let{data:i,error:r}=await t.supabase.from("reps").delete().eq("id",e).select().single();if(r)throw r;return i}async function d(e){let{data:i,error:r}=await t.supabase.from("workout").delete().eq("id",e).select().single();if(r)throw r;return i}async function f(e){let{data:i,error:r}=await t.supabase.from("workout_line").delete().eq("id",e).select().single();if(r)throw r;return i}async function p(e){let{data:i,error:r}=await t.supabase.from("serie").delete().eq("id",e).select().single();if(r)throw r;return i}e.s(["addExerciseToWorkout",()=>s,"addRep",()=>l,"addSet",()=>o,"createWorkout",()=>a,"deleteExercise",()=>f,"deleteRep",()=>c,"deleteSerie",()=>p,"deleteWorkout",()=>d,"editRep",()=>u,"getWorkoutById",()=>r,"getWorkoutsPaginated",()=>i,"updateWorkoutLine",()=>n])},69170,e=>{"use strict";var t=e.i(43476),i=e.i(76525),r=e.i(71645);let a=(0,r.forwardRef)(({label:e,error:i,fullWidth:a=!1,style:s,value:n,...o},l)=>{let[u,c]=(0,r.useState)(!1),d=void 0!==n&&""!==n;return(0,t.jsxs)("div",{className:["ui-input-container",a?"ui-input-container--full":""].join(" "),children:[e&&(0,t.jsx)("label",{className:"ui-input-label",children:e}),(0,t.jsx)("input",{ref:l,type:"date",value:n,className:["ui-input",i?"ui-input--error":"",u?"ui-input--focus":"",d?"ui-input--filled":""].join(" "),style:s,onFocus:e=>{c(!0),o.onFocus?.(e)},onBlur:e=>{c(!1),o.onBlur?.(e)},...o}),i&&(0,t.jsx)("span",{className:"ui-input-error",children:i})]})});a.displayName="DatePicker";var s=e.i(71120),n=e.i(41889),o=e.i(79390),l=e.i(42365),u=e.i(18566),c=e.i(60446),d=e.i(46696);function f(){let e=(0,u.useRouter)(),[f,p]=(0,r.useState)([]),[w,h]=(0,r.useState)(""),[g,m]=(0,r.useState)(new Date().toISOString().split("T")[0]),[v,b]=(0,r.useState)(!1),[y,x]=(0,r.useState)(null),{setTitle:k}=(0,c.usePageTitle)();(0,r.useEffect)(()=>{(0,l.getUser)().then(e=>{x(e?.data?.user?.id??null)}),(0,n.getCategoriesForSelect)().then(e=>{p(e),e.length>0&&h(e[0].value.toString())}),k("Nouvelle séance")},[k]);let j=async()=>{if(y&&w&&g)try{b(!0);let t=await (0,o.createWorkout)(y,g,w);d.toast.success("Séance créée"),e.push(`/workout/?workout=${t.id}`)}catch(e){console.error("Erreur création séance:",e),d.toast.error("Erreur lors de la création de la séance"),b(!1)}};return(0,t.jsxs)("div",{className:"content",children:[(0,t.jsx)(s.default,{options:f,value:w,onChange:e=>h(e.target.value),fullWidth:!0}),(0,t.jsx)(a,{value:g,onChange:e=>m(e.target.value)}),(0,t.jsx)(i.default,{variant:"filled",fullWidth:!0,onClick:j,disabled:v||!y,children:v?"Création...":"Créer la séance"})]})}e.s(["default",()=>f],69170)}]);